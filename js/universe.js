!function(){"use strict";const t="180,184,240",i="226,225,224",s="226,225,142",h=.05,e=.216,a=.108,n=200,o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<768,c=(t,i)=>Math.random()*(i-t)+t,r=t=>Math.floor(1e3*Math.random())+1<10*t;class d{constructor(){this.canvas=document.getElementById("universe"),this.canvas?(this.ctx=this.canvas.getContext("2d"),this.particles=[],this.animationId=null,this.isVisible=!0,this.init()):console.warn("Universe canvas not found")}init(){this.setupCanvas(),this.createParticles(),this.setupEventListeners(),this.start()}setupCanvas(){this.width=window.innerWidth,this.height=window.innerHeight,this.particleCount=Math.floor(this.width*(o?a:e)),this.canvas.width=this.width,this.canvas.height=this.height}createParticles(){this.particles=[];for(let t=0;t<this.particleCount;t++)this.particles.push(new l(this.width,this.height,!0));setTimeout(()=>{this.particles.forEach(t=>t.allowComet=!0)},50)}setupEventListeners(){const t=((t,i)=>{let s;return function(...h){clearTimeout(s),s=setTimeout(()=>{clearTimeout(s),t(...h)},i)}})(()=>{this.setupCanvas(),this.createParticles()},n);window.addEventListener("resize",t,{passive:!0}),document.addEventListener("visibilitychange",()=>{document.hidden?(this.stop(),this.isVisible=!1):(this.isVisible=!0,this.start())})}render(){if(this.isVisible){this.ctx.clearRect(0,0,this.width,this.height);for(let t=0;t<this.particles.length;t++){const i=this.particles[t];i.update(),i.draw(this.ctx)}}}start(){if(this.animationId)return;const t=()=>{this.render(),this.animationId=requestAnimationFrame(t)};t()}stop(){this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null)}}class l{constructor(t,i,s=!1){this.canvasWidth=t,this.canvasHeight=i,this.allowComet=!s,this.reset()}reset(){this.isGiant=r(3),this.isComet=!this.isGiant&&this.allowComet&&r(10),this.x=c(0,this.canvasWidth-10),this.y=c(0,this.canvasHeight),this.radius=c(1.1,2.6);const t=h,i=this.isComet?c(50,120):1;this.dx=c(t,6*t)+(this.isComet?t*i:0)+2*t,this.dy=-c(t,6*t)-(this.isComet?t*i:0),this.opacity=0,this.opacityThreshold=c(.2,this.isComet?.6:1),this.opacityDelta=c(5e-4,.002)+(this.isComet?.001:0),this.fadingIn=!0,this.fadingOut=!1}update(){this.x+=this.dx,this.y+=this.dy,this.fadingIn&&(this.opacity+=this.opacityDelta,this.opacity>=this.opacityThreshold&&(this.fadingIn=!1)),this.fadingOut&&(this.opacity-=this.opacityDelta/2,(this.opacity<=0||this.x>this.canvasWidth||this.y<0)&&(this.reset(),this.fadingOut=!1)),!this.fadingOut&&(this.x>this.canvasWidth-this.canvasWidth/4||this.y<0)&&(this.fadingOut=!0)}draw(h){if(h.beginPath(),this.isGiant)h.fillStyle=`rgba(${t},${this.opacity})`,h.arc(this.x,this.y,2,0,2*Math.PI);else if(this.isComet){h.fillStyle=`rgba(${i},${this.opacity})`,h.arc(this.x,this.y,1.5,0,2*Math.PI);for(let t=0;t<30;t++){const s=this.opacity-this.opacity/20*t;s>0&&(h.fillStyle=`rgba(${i},${s})`,h.fillRect(this.x-this.dx/4*t,this.y-this.dy/4*t-2,2,2))}}else h.fillStyle=`rgba(${s},${this.opacity})`,h.fillRect(this.x,this.y,this.radius,this.radius);h.closePath(),h.fill()}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{new d}):new d}();