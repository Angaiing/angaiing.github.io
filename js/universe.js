!function(){"use strict";const t={giant:"180,184,240",comet:"226,225,224",normal:"226,225,142"},i={baseSpeed:.05,desktopParticleRatio:.216,mobileParticleRatio:.108,resizeDebounceMs:200},s=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<768,e=(t,i)=>Math.random()*(i-t)+t,h=t=>Math.floor(1e3*Math.random())+1<10*t,a=(t,i)=>{let s;return function(...e){clearTimeout(s),s=setTimeout(()=>{clearTimeout(s),t(...e)},i)}};class n{constructor(){this.canvas=document.getElementById("universe"),this.canvas?(this.ctx=this.canvas.getContext("2d"),this.particles=[],this.animationId=null,this.isVisible=!0,this.init()):console.warn("Universe canvas not found")}init(){this.setupCanvas(),this.createParticles(),this.setupEventListeners(),this.start()}setupCanvas(){this.width=window.innerWidth,this.height=window.innerHeight,this.particleCount=Math.floor(this.width*(s?i.mobileParticleRatio:i.desktopParticleRatio)),this.canvas.width=this.width,this.canvas.height=this.height}createParticles(){this.particles=[];for(let t=0;t<this.particleCount;t++)this.particles.push(new o(this.width,this.height,true));setTimeout(()=>{this.particles.forEach(t=>t.allowComet=!0)},50)}setupEventListeners(){const t=a(()=>{this.setupCanvas(),this.createParticles()},i.resizeDebounceMs);window.addEventListener("resize",t,{passive:!0}),document.addEventListener("visibilitychange",()=>{document.hidden?(this.stop(),this.isVisible=!1):(this.isVisible=!0,this.start())})}render(){if(this.isVisible){this.ctx.clearRect(0,0,this.width,this.height);for(let t=0;t<this.particles.length;t++){const i=this.particles[t];i.update(),i.draw(this.ctx)}}}start(){if(this.animationId)return;const t=()=>{this.render(),this.animationId=requestAnimationFrame(t)};t()}stop(){this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null)}}class o{constructor(t,i,s=!1){this.canvasWidth=t,this.canvasHeight=i,this.allowComet=!s,this.reset()}reset(){this.isGiant=h(3),this.isComet=!this.isGiant&&this.allowComet&&h(10),this.x=e(0,this.canvasWidth-10),this.y=e(0,this.canvasHeight),this.radius=e(1.1,2.6);const t=i.baseSpeed,s=this.isComet?e(50,120):1;this.dx=e(t,6*t)+(this.isComet?t*s:0)+2*t,this.dy=-e(t,6*t)-(this.isComet?t*s:0),this.opacity=0,this.opacityThreshold=e(.2,this.isComet?.6:1),this.opacityDelta=e(5e-4,.002)+(this.isComet?.001:0),this.fadingIn=!0,this.fadingOut=!1}update(){this.x+=this.dx,this.y+=this.dy,this.fadingIn&&(this.opacity+=this.opacityDelta,this.opacity>=this.opacityThreshold&&(this.fadingIn=!1)),this.fadingOut&&(this.opacity-=this.opacityDelta/2,(this.opacity<=0||this.x>this.canvasWidth||this.y<0)&&(this.reset(),this.fadingOut=!1)),!this.fadingOut&&(this.x>this.canvasWidth-this.canvasWidth/4||this.y<0)&&(this.fadingOut=!0)}draw(i){if(i.beginPath(),this.isGiant)i.fillStyle=`rgba(${t.giant},${this.opacity})`,i.arc(this.x,this.y,2,0,2*Math.PI);else if(this.isComet){i.fillStyle=`rgba(${t.comet},${this.opacity})`,i.arc(this.x,this.y,1.5,0,2*Math.PI);for(let s=0;s<30;s++){const e=this.opacity-this.opacity/20*s;e>0&&(i.fillStyle=`rgba(${t.comet},${e})`,i.fillRect(this.x-this.dx/4*s,this.y-this.dy/4*s-2,2,2))}}else i.fillStyle=`rgba(${t.normal},${this.opacity})`,i.fillRect(this.x,this.y,this.radius,this.radius);i.closePath(),i.fill()}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{new n}):new n}();